import fetch from "node-fetch";
import { recordings } from "./history.js";

const tokens = new Map([
  [
    "LULUMOMENTTI",
    "eyJhbGciOiJSUzI1NiIsImtpZCI6IjUyZmEwZjE2NmJmZjZiODU5N2FjMGFlMDRlNTllZmYxOTk1N2MyYmIiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vaGFsbGFib2lzLWF1dGgiLCJhdWQiOiJoYWxsYWJvaXMtYXV0aCIsImF1dGhfdGltZSI6MTY2MjAyMTUxNiwidXNlcl9pZCI6IlI3VXUzZ2puQnZaNmZUZzVNZmVya2I5TlMyMDMiLCJzdWIiOiJSN1V1M2dqbkJ2WjZmVGc1TWZlcmtiOU5TMjAzIiwiaWF0IjoxNjYyMDIxNTIwLCJleHAiOjE2NjIwMjUxMjAsImVtYWlsIjoibHhhNWtlb3o5a0BnbWFpbHZuLm5ldCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbImx4YTVrZW96OWtAZ21haWx2bi5uZXQiXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.FIls48jhtE-cc3WwSgMm6r5ozS-51aucm6SEyBEnGIx86kyfby6fJPOWhwiCqNsu3kbK4-_xSTHrb9OvNzMAik7SbPCJg3XH3K8NdvRUfBCKvH66H_v2-PtK9hdZpSa_KZNobaJWZTVdnpFbGvBmY1HAcZp8XWuQZOBDrigVK4l9ALmbf3HDy5jANwPTbcmroCznenNlI-Xd6DGo3IFOqUHOsXRcQXNFQCwF2AMODldpx5632a06eknroyldiGHtm1V8l38hfyu6Hb65b30_LDoAf_kyInmC1y0mhFyOMeRnW9SNjEsye-hIdTVC0jLK9NRsd9-lGU1LJxKJ85RwXA",
  ],
  [
    "Common_Helsinki_L",
    "eyJhbGciOiJSUzI1NiIsImtpZCI6IjUyZmEwZjE2NmJmZjZiODU5N2FjMGFlMDRlNTllZmYxOTk1N2MyYmIiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vaGFsbGFib2lzLWF1dGgiLCJhdWQiOiJoYWxsYWJvaXMtYXV0aCIsImF1dGhfdGltZSI6MTY2MjAyMjYzOSwidXNlcl9pZCI6InY1S0NlY2lxUW5OTmxuN09oWkhXN0k2V2hwNTMiLCJzdWIiOiJ2NUtDZWNpcVFuTk5sbjdPaFpIVzdJNldocDUzIiwiaWF0IjoxNjYyMDIyNjM5LCJleHAiOjE2NjIwMjYyMzksImVtYWlsIjoianBhem9zQHNvY2NlcmZpdC5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiZmlyZWJhc2UiOnsiaWRlbnRpdGllcyI6eyJlbWFpbCI6WyJqcGF6b3NAc29jY2VyZml0LmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6InBhc3N3b3JkIn19.L1opr7xmhJEjlCymGJFgTmtu7kgep343PTgL7wXtm2lZTGQ0lYGPVa7C1u75yY5VsYHNXEKseMmtE_N02P9T7MGBiqWz4WKP2ZDwdpkbwEUnQvKna1NElAmtCgqu9n0nUXTGhweoN-Y04kAOf4hBtjRurtCq8P7COoBMsuSKGbRKb4om5Meq9zdB9NaZE_XgQwFSWHRiUztxrDl3aR_S0v4BCseTRfuuLPe9gUvoEA8KQA9IQbKCbN4BU5qtUg5_9YlnMiHysw9o2v4HjdGRt5kjB-0zst8ZFXfvAGXCkB-2cJzIFW3Asw1ho8u-Ku_iu_pwfLExmJhBaNghiAoJYw",
  ],
  [
    "HallaFembois",
    "eyJhbGciOiJSUzI1NiIsImtpZCI6IjUyZmEwZjE2NmJmZjZiODU5N2FjMGFlMDRlNTllZmYxOTk1N2MyYmIiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vaGFsbGFib2lzLWF1dGgiLCJhdWQiOiJoYWxsYWJvaXMtYXV0aCIsImF1dGhfdGltZSI6MTY2MjAyMzU1MCwidXNlcl9pZCI6IklCN1Z0VjlSUUdoWkFBRzVOeURoYmhvZHBSdjIiLCJzdWIiOiJJQjdWdFY5UlFHaFpBQUc1TnlEaGJob2RwUnYyIiwiaWF0IjoxNjYyMDIzNTUwLCJleHAiOjE2NjIwMjcxNTAsImVtYWlsIjoib2JsYW1hbkA4MTZxcy5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiZmlyZWJhc2UiOnsiaWRlbnRpdGllcyI6eyJlbWFpbCI6WyJvYmxhbWFuQDgxNnFzLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6InBhc3N3b3JkIn19.HPK2nsMA4-eIEec8UBTIbqbJu1jXaMUS3JTIc6crC-cNl0KOK6c6fWrMemc5pLmttG5TNsjvACV5VVwbwnytOtDAZgraEB1LxX8mhJeQLxB67EkYQCkMeYS2yU8LO_AwiJUC_Yg0GXflDl0WvpBXrQdpsVOlPbzpwv2s3qLxctkmrSuY7HpLDOl0qb3MLjLMn4mgFSUiUteCSlNVHQMsPWWo3YBVPg52rkWX-mnLkZF0vJF6eBPyfb-Ibz141mjt-n0QIAucPSvq_6nsLlKWFt53V27mAzDXw4RM8rCNF2jfoaR_2C9khAXqRIWis172S-hGIT5J2-ceBjs2TZYN3g",
  ],
  [
    "Kullisaari",
    "eyJhbGciOiJSUzI1NiIsImtpZCI6IjUyZmEwZjE2NmJmZjZiODU5N2FjMGFlMDRlNTllZmYxOTk1N2MyYmIiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vaGFsbGFib2lzLWF1dGgiLCJhdWQiOiJoYWxsYWJvaXMtYXV0aCIsImF1dGhfdGltZSI6MTY2MjAyNDA3NCwidXNlcl9pZCI6Ik83SVJqcDVKQnpQNjA2OUc1MzQ2WVlSZ1FyZzEiLCJzdWIiOiJPN0lSanA1SkJ6UDYwNjlHNTM0NllZUmdRcmcxIiwiaWF0IjoxNjYyMDI0MDc0LCJleHAiOjE2NjIwMjc2NzQsImVtYWlsIjoia2VudGE5MjA1QGJpYmxpb3Rla2Fkb21vdi5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiZmlyZWJhc2UiOnsiaWRlbnRpdGllcyI6eyJlbWFpbCI6WyJrZW50YTkyMDVAYmlibGlvdGVrYWRvbW92LmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6InBhc3N3b3JkIn19.rsy8R7_1j4UKpEB6n_xV6xcUhj3N2q6kkCQFm56iaFTqURr4FMqQHFbOLEN9ghr6KZDSCW2TSK0Vmt4ZNj-TianThhWiycLjqroLG__S_BwuLS1qRJqu3Pic3tsXC3kQnSWj_MdRYp280e_uDVIEQrrs6zmKD_URo_vqPUCxRpvmq1pTlmEwJ5UB8N0Q3xXuY-UkzKrbwe3_dphxFvbrsbbpjynoKi5c2I8iRxrjOvkJfnxYTnVIl7bYSfpFBItkcn4-4tLASgY9JuTO8giODEolBpdfK-Q9J2OkfT3EqYuaHn0eMajQWKlK5VY6GLug3Qx0062iz3dvhypVgQwpvQ",
  ],
]);

const username = "Kullisaari";
const rec = recordings[9];
const email = "kenta9205@bibliotekadomov.com";

const res = await setScore(rec, username, tokens.get(username));
// const res = await registerEmail(email);

console.log((await res.text()).slice(0, 100));

function setScore(rec, username, token) {
  return fetch("https://oispahallalb.herokuapp.com/scores/size/4", {
    credentials: "omit",
    headers: {
      "User-Agent":
        "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:104.0) Gecko/20100101 Firefox/104.0",
      Accept: "*/*",
      "Accept-Language": "en-US,en;q=0.5",
      "Content-Type": "application/json",
      "Sec-Fetch-Dest": "empty",
      "Sec-Fetch-Mode": "cors",
      "Sec-Fetch-Site": "cross-site",
      Pragma: "no-cache",
      "Cache-Control": "no-cache",
    },
    referrer: "https://oispahalla.com/",
    body: `{"user":{"token":"${token}","screenName":"${username}"},"score":${rec.score},"breaks":0,"history":"${rec.rec}"}`,
    method: "POST",
    mode: "cors",
  });
}
function registerEmail(email) {
  return fetch(
    "https://identitytoolkit.googleapis.com/v1/accounts:sendOobCode?key=AIzaSyCOV2pOfusUtinSwdDHONKQ48zvZRdQ6Gs",
    {
      credentials: "omit",
      headers: {
        "User-Agent":
          "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:104.0) Gecko/20100101 Firefox/104.0",
        Accept: "*/*",
        "Accept-Language": "en-US,en;q=0.5",
        "Content-Type": "application/json",
        "X-Client-Version": "Firefox/JsCore/9.9.3/FirebaseCore-web",
        "X-Firebase-gmpid": "1:122091804244:web:6f8346acf9ade4b3d57fc1",
        "Sec-Fetch-Dest": "empty",
        "Sec-Fetch-Mode": "cors",
        "Sec-Fetch-Site": "cross-site",
        Pragma: "no-cache",
        "Cache-Control": "no-cache",
      },
      body: `{"requestType":"EMAIL_SIGNIN","email":"${email}","continueUrl":"https://oispahalla.com/auth/emailconfirm","canHandleCodeInApp":true}`,
      method: "POST",
      mode: "cors",
    }
  );
}
